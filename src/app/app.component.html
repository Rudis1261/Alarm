<div id="main">
  <i class="logo icon-vpn_key pull-left"></i>
  <div class="user-details pull-right">
    <div *ngIf="afAuth.authState | async as user; else showLogin">
      <div class="profile">
        <img [src]="user.photoURL" [title]="user.displayName" />
        <span>{{user.displayName}}</span>
        <button (click)="logout()"><i class="icon-logout"></i></button>
      </div>
    </div>
    <ng-template #showLogin>
      <div class="btn" (click)="showLoginModal = (showLoginModal) ? false: true">Login</div>
    </ng-template>
  </div>
  <div class="clearfix"></div>

  <div class="container">
    <div *ngIf="afAuth.authState | async as user; else showWelcome">

      <div class="btn" (click)="setSection('main')">Home</div>
      <div class="btn" (click)="setSection('zone')">Zones</div>
      <div class="btn" (click)="setSection('stats')">Stats</div>
      <div class="btn" (click)="setSection('tools')">Tools</div>

      <!-- Main Section -->
      <div *ngIf="section && section == 'main'">
        <app-events></app-events>
        <br>
        <app-home></app-home>
      </div>

      <!-- Zone Section -->
      <div *ngIf="section && section == 'zone'">
        <app-zones></app-zones>
      </div>

      <!-- Tools Section -->
      <div *ngIf="section && section == 'tools'">
        <br />
        <br />
        <div class="btn" (click)="getToken()">Get token</div>
        <div class="btn btn-danger pull-right" (click)="testNotification()">Test <i class="icon-alert"></i></div>
        <label *ngIf="token">
          <textarea row="5" type="text" [(innerHtml)]="token" (click)="select($event)"></textarea>
        </label>
      </div>

      <!-- Stats Section -->
      <div *ngIf="section && section == 'stats'">
        <app-stats></app-stats>
      </div>
    </div>

    <ng-template #showWelcome>
      <h2>Oh hi there....</h2>
      <p>This is awkward, but this isn't something for everyone sadly..</p>
    </ng-template>

    <app-modal [(visible)]="showLoginModal" title="Login">
      <app-login (onCloseModal)="onCloseModal()"></app-login>
    </app-modal>
  </div>
</div>

<footer>Alarm system by {{author}}</footer>
